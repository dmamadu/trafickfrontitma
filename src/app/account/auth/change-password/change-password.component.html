<mat-card class="password-card">
<mat-card-header class="password-card-header">
  <div class="header-content">
    <div class="password-header">
      <mat-icon class="password-icon">lock_reset</mat-icon>
      <div class="header-text">
        <mat-card-title>Changer le mot de passe</mat-card-title>
        <mat-card-subtitle>Pour votre sécurité, choisissez un mot de passe fort</mat-card-subtitle>
      </div>
    </div>

    <button mat-icon-button (click)="matDialogRef.close()" aria-label="Fermer" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>
</mat-card-header>

  <mat-divider></mat-divider>

  <div>
    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="password-form d-flex flex-column gap-3">
      <!-- Email Field -->
      <!-- <mat-form-field appearance="fill" class="full-width" floatLabel="always">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" placeholder="votre@email.com">
        <mat-icon matPrefix>mail_outline</mat-icon>
        <mat-error *ngIf="passwordForm.get('email')?.invalid">
          {{ getErrorMessage('email') }}
        </mat-error>
      </mat-form-field> -->

      <!-- Current Password -->
      <mat-form-field appearance="fill" class="full-width" floatLabel="always">
        <mat-label>Mot de passe actuel</mat-label>
        <input matInput [type]="hideoldPassword ? 'password' : 'text'" formControlName="oldPassword">
        <mat-icon matPrefix>lock_outline</mat-icon>
        <button type="button" mat-icon-button matSuffix (click)="hideoldPassword = !hideoldPassword">
          <mat-icon>{{ hideoldPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="passwordForm.get('oldPassword')?.invalid">
          {{ getErrorMessage('oldPassword') }}
        </mat-error>
      </mat-form-field>

      <!-- New Password -->
      <mat-form-field appearance="fill" class="full-width" floatLabel="always">
        <mat-label>Nouveau mot de passe</mat-label>
        <input matInput [type]="hideNewPassword ? 'password' : 'text'" formControlName="newPassword">
        <mat-icon matPrefix>password</mat-icon>
        <button type="button" mat-icon-button matSuffix (click)="hideNewPassword = !hideNewPassword">
          <mat-icon>{{ hideNewPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <!-- <mat-hint class="password-hint">
          <mat-icon>info_outline</mat-icon>
          Doit contenir au moins 8 caractères avec majuscule, minuscule, chiffre et caractère spécial
        </mat-hint> -->
        <mat-error *ngIf="passwordForm.get('newPassword')?.invalid">
          {{ getErrorMessage('newPassword') }}
        </mat-error>
      </mat-form-field>

      <!-- Confirm Password -->
      <mat-form-field appearance="fill" class="full-width" floatLabel="always">
        <mat-label>Confirmer le mot de passe</mat-label>
        <input matInput [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword">
        <mat-icon matPrefix>lock_reset</mat-icon>
        <button type="button" mat-icon-button matSuffix (click)="hideConfirmPassword = !hideConfirmPassword">
          <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="passwordForm.get('confirmPassword')?.invalid || passwordForm.hasError('notSame')">
          {{ getErrorMessage('confirmPassword') }}
        </mat-error>
      </mat-form-field>

      <div class="button-actions">
        <button mat-stroked-button color="basic" type="button" (click)="onCancel()">
          Annuler
        </button>
        <button mat-raised-button  type="submit"   class="bg-green-500" [disabled]="passwordForm.invalid">
          <mat-icon>save</mat-icon>
          Enregistrer
        </button>
      </div>
    </form>
  </div>
</mat-card>
