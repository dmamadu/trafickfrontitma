<div class="login-page">
  <div class="login-card">
    <!-- En-tête -->
    <div class="card-header">
      <div class="header-left">
        <a routerLink="/home">
          <h1 class="app-name">Inv<span class="orange-o">O</span>dis</h1>
        </a>
        <p class="app-description">Gestion des parties affectées</p>
      </div>
      <a routerLink="/home">
        <img src="assets/images/logo/Logoinvodis.png" alt="Logo" class="app-logo">
      </a>
    </div>

    <!-- Formulaire -->
    <div class="card-body">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <!-- Message d'erreur -->
        @if(error) {
        <div class="error-message">
          <mat-icon>error</mat-icon>
          <span>{{ error }}</span>
        </div>
        }

        <!-- Champ Email -->
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" formControlName="email" placeholder="email@exemple.com"
            [ngClass]="{ 'input-error': submitted && f.email.errors }">
          @if(submitted && f.email.errors) {
          <div class="validation-error">
            @if(f.email.errors.required) {<span>Email requis</span>}
            @if(f.email.errors.email) {<span>Format invalide</span>}
          </div>
          }
        </div>

        <!-- Champ Mot de passe -->
        <div class="form-group">
          <label for="password">Mot de passe</label>
          <div class="password-group">
            <input [type]="fieldTextType ? 'text' : 'password'" id="password" formControlName="password"
              placeholder="••••••••" [ngClass]="{ 'input-error': submitted && f.password.errors }">
            <button type="button" class="toggle-password" (click)="toggleFieldTextType()">
              <mat-icon>{{ fieldTextType ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </div>
          @if(submitted && f.password.errors) {
          <div class="validation-error">
            @if(f.password.errors.required) {<span>Mot de passe requis</span>}
          </div>
          }
        </div>

        <!-- Options -->
        <div class="form-options">
          <label class="remember-me">
            <input type="checkbox" id="remember">
            <span>Se souvenir de moi</span>
          </label>
          <a routerLink="/auth/reset-password" class="forgot-password">Mot de passe oublié ?</a>
        </div>

        <!-- Boutons -->
        <div class="form-actions">
          <button type="button" class="btn btn-back" routerLink="/home">
            <mat-icon>arrow_back</mat-icon>
            Retour
          </button>
          <button type="submit" class="btn btn-login" [disabled]="loginForm.invalid">
            @if(submitted) {
            <mat-spinner diameter="20"></mat-spinner>
            } @else {
            <mat-icon>login</mat-icon>
            Connexion
            }
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
