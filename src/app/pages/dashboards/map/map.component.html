<div>
  <div class="map-legend">
    <h4>Légende des statuts PAP</h4>
    <div><span class="legend-color" style="background-color: #FFA500;"></span> Recensé</div>
    <div><span class="legend-color" style="background-color: #FFFF00;"></span> En étude</div>
    <div><span class="legend-color" style="background-color: #0000FF;"></span> Indem. engagée</div>
    <div><span class="legend-color" style="background-color: #00FF00;"></span> Indem. terminée</div>
    <div><span class="legend-color" style="background-color: #FF00FF;"></span> Contentieux</div>
  </div>

  <div class="map-container">
    <div #mapContainer class="map"></div>
    <!-- Popup détaillée -->
    <div *ngIf="selectedPap" class="custom-popup">
      <div class="popup-header">
        <h3>{{ selectedPap.nom }} {{ selectedPap.prenom }}</h3>
        <button (click)="closePopup()">×</button>
      </div>
      <div class="popup-content">
        <p><strong>Code:</strong> {{ selectedPap.codePap }}</p>
        <p><strong>Adresse:</strong> {{ selectedPap.commune }}</p>
        <p><strong>Activité:</strong> {{ selectedPap.activitePrincipale }}</p>
        <!-- Ajoutez d'autres champs ici -->
      </div>
    </div>

    <div *ngIf="loadData" class="loading-overlay">
      Chargement des données...
    </div>
  </div>
</div>