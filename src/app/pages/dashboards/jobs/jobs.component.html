<div class="container-fluid stats-container">
  <!-- Titre principal -->
  <h1 class="main-title couleurPrimary">
    <mat-icon>assessment</mat-icon> Statistiques des données
  </h1>

  <!-- Cartes statistiques -->
  <div class="stats-cards">
    <div class="stats-card">
      <div class="card-icon">
        <mat-icon>people</mat-icon>
      </div>
      <div class="card-value">{{lengthPap}}</div>
      <div class="card-label">Personnes affectées</div>
    </div>

    <div class="stats-card">
      <div class="card-icon">
        <mat-icon>groups</mat-icon>
      </div>
      <div class="card-value">{{lengthPip}}</div>
      <div class="card-label">Parties intéressées</div>
    </div>

    <div class="stats-card">
      <div class="card-icon">
        <mat-icon>feedback</mat-icon>
      </div>
      <div class="card-value">{{lengthPlainte}}</div>
      <div class="card-label">Nombre de plaintes</div>
    </div>

    <div class="stats-card">
      <div class="card-icon">
        <mat-icon>meeting_room</mat-icon>
      </div>
      <div class="card-value">{{lengthRencontre}}</div>
      <div class="card-label">Nombre de consultations</div>
    </div>
  </div>

  <!-- Section Graphiques -->
  <div class="graphs-section">
    <h1 class="section-title couleurPrimary">
      <mat-icon>show_chart</mat-icon> Statistiques
    </h1>

    <div class="graphs-row">
      <div class="graph-container">
        <h2 class="graph-title couleurPrimary">
          <mat-icon>pie_chart</mat-icon> Statistiques des Plaintes
        </h2>
        <apx-chart [series]="complaintChart.series" [chart]="complaintChart.chart" [labels]="complaintChart.labels"
          [colors]="complaintChart.colors" [legend]="complaintChart.legend">
        </apx-chart>
      </div>

      <div class="graph-container">
        <h2 class="graph-title couleurPrimary">
          <mat-icon>bar_chart</mat-icon> Statistiques des PAP
        </h2>
        <apx-chart [series]="vulnerabilityChart.series" [chart]="vulnerabilityChart.chart"
          [labels]="vulnerabilityChart.labels" [colors]="vulnerabilityChart.colors"
          [legend]="vulnerabilityChart.legend">
        </apx-chart>
      </div>
    </div>
  </div>

  <!-- Section Documents et Carte -->
  <div class="documents-map-section">
    <div class="documents-container">
      <h2 class="section-title couleurPrimary">
        <mat-icon>description</mat-icon> Liste des documents enregistrés
      </h2>

      <div class="documents-list">
        <div class="document-item" *ngFor="let item of listDocument; let i = index">
          <div class="document-icon">
            <mat-icon>insert_drive_file</mat-icon>
          </div>
          <div class="document-info">
            <a [href]="item.fichierUrl" class="document-link" target="_blank">
              {{ getFileName(item.libelle) }}
            </a>
          </div>
          <div class="document-action">
            <a [href]="item.urlDocument" target="_blank" class="download-btn">
              <mat-icon>download</mat-icon>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="map-container">
      <h2 class="section-title couleurPrimary">
        <mat-icon>map</mat-icon> Délimitation de la zone impactée par le projet
      </h2>
      <!-- <img src="assets/images/villageImpacte.png" alt="Carte de la zone impactée" class="map-image"> -->
      <app-carte></app-carte>
      <!-- <app-google></app-google> -->
    </div>
  </div>

  <!-- Section Tableaux -->
  <div class="tables-section">
    <!-- Tableau Rencontres -->
    <div class="table-container">
      <h2 class="section-title couleurPrimary">
        <mat-icon>event_note</mat-icon> Résumé des rencontres
      </h2>

      <div class="custom-table">
        <div class="table-header">
          <div class="header-cell">#</div>
          <div class="header-cell">Type d'engagement</div>
          <div class="header-cell">Date</div>
          <div class="header-cell">Référence compte rendu</div>
          <div class="header-cell">Action</div>
        </div>

        <div class="table-body">
          <div class="table-row"
            *ngFor="let rencontre of lisRencontre | paginate: { itemsPerPage: 5, currentPage: page }; let i = index">
            <div class="table-cell">{{ rencontre.id }}</div>
            <div class="table-cell">{{ rencontre.libelle }}</div>
            <div class="table-cell">{{ rencontre.date }}</div>
            <div class="table-cell">{{ rencontre.urlPvRencontre }}</div>
            <div class="table-cell">
              <button class="view-btn" (click)="openImageModal(rencontre.urlPvRencontre)" title="Voir le PV">
                <mat-icon>visibility</mat-icon>
              </button>
            </div>
          </div>
        </div>
      </div>

      <pagination-controls (pageChange)="page = $event" class="custom-pagination"></pagination-controls>
    </div>

    <!-- Tableau Budget -->
    <div class="table-container">
      <h2 class="section-title couleurPrimary">
        <mat-icon>attach_money</mat-icon> Estimation des coûts
      </h2>

      <div class="custom-table">
        <div class="table-header">
          <div class="header-cell">Catégories</div>
          <div class="header-cell">Compensation</div>
        </div>

        <div class="table-body">
          <div class="table-row">
            <div class="table-cell">Pap place affaires/économiques</div>
            <div class="table-cell">{{evaluationPertePlaceAffaire | currency:'CFA ':'symbol':'1.0-0'}}</div>
          </div>
          <div class="table-row">
            <div class="table-cell">Pap Agricoles/exploitants</div>
            <div class="table-cell">{{evaluationPerteAgricole | currency:'CFA ':'symbol':'1.0-0'}}</div>
          </div>
          <!-- Répéter pour les autres lignes -->
          <div class="table-row total-row">
            <div class="table-cell">Total général</div>
            <div class="table-cell">{{ (evaluationPertePlaceAffaire + evaluationPerteAgricole) |
              currency:'CFA ':'symbol':'1.0-0' }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<!-- container-fluid -->
